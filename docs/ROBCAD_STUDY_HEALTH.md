# Robcad Study Health Report

Generates an opt-in lint report for RobcadStudy names and flags cross-study anomalies.

## Inputs

The report reads one or more inputs:
- Tree HTML generated by `generate-tree-html.ps1` (contains `const rawData =`).
- Tree data text files (`tree-data-*-clean.txt` or similar pipe-delimited files).

If you have separate Study Resource Tree and Operational Tree exports, pass both with multiple `-Input` values.

## Usage

Generate tree HTML (example Ford Dearborn run):

```powershell
.\generate-ford-dearborn-tree.ps1
```

```powershell
.\scripts\robcad-study-health.ps1 -Input .\navigation-tree-DESIGN12-18140190.html -OutDir out
```

Multiple inputs:

```powershell
.\scripts\robcad-study-health.ps1 -Input @(".\navigation-tree-DESIGN12-18140190.html", ".\operations-extracted.txt") -OutDir out
```

## Outputs

Written to the output directory:
- `robcad-study-health-report.md`
- `robcad-study-health-issues.csv`
- `robcad-study-health-suspicious.csv`
- `robcad-study-health-rename-suggestions.csv` (only if suggestions exist)

`Score/Distance` in the suspicious CSV is the normalized edit distance to the nearest study name.

## Rules Config

Edit rules here:
- `config/robcad-study-health-rules.json`

This controls token lists, thresholds, and heuristics such as abbreviation soup and edit distance.

## Smoke Test

```powershell
.\scripts\run-study-health-smoke.ps1 -Input .\navigation-tree-DESIGN12-18140190.html -OutDir out
```

The smoke test fails with a non-zero exit if expected report files are missing.
